















<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2020-09-21 18:16:16 -0600">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/lesson.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/syntax.css" />
    <link rel="license" href="#license-info" />

    



    <!-- Favicons for everyone -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../assets/favicons/swc/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/favicons/swc/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/favicons/swc/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/favicons/swc/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../assets/favicons/swc/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../assets/favicons/swc/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../assets/favicons/swc/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../assets/favicons/swc/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="Software Carpentry - CESM Quickstart Review"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="../assets/favicons/swc/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="../assets/favicons/swc/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="../assets/favicons/swc/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="../assets/favicons/swc/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="../assets/favicons/swc/mstile-310x310.png" />


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

  <title>
  CESM Quickstart &ndash; CESM Quickstart Review
  </title>  

  </head>
  <body>

    







    <div class="container">
      
















  
  










<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      <a class="navbar-brand" href="../index.html">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

        
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            <li><a href="../01-Quickstart-Review/index.html">CESM Quickstart Review</a></li>
            
            
            <li><a href="../05-CESM-Quickstart/index.html">CESM Quickstart</a></li>
            
	    <li role="separator" class="divider"></li>
            <li><a href="../aio/index.html">All in one page (Beta)</a></li>
          </ul>
        </li>

	
	
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../reference.html">Reference</a></li>
            
            
            <li><a href="../about/index.html">About</a></li>
            
            
            <li><a href="../discuss/index.html">Discussion</a></li>
            
            
            <li><a href="../figures/index.html">Figures</a></li>
            
            
            <li><a href="../guide/index.html">Instructor Notes</a></li>
            
          </ul>
        </li>
	

      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>




























  
  











<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../01-Quickstart-Review/index.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
    <h3 class="maintitle"><a href="../">CESM Quickstart Review</a></h3>
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span><span class="sr-only">lesson home</span></a>
      
    </h3>
  </div>
</div>

<article>
<div class="row">
  <div class="col-md-1">
  </div>
  <div class="col-md-10">
    <h1 class="maintitle">CESM Quickstart</h1>
  </div>
  <div class="col-md-1">
  </div>
</div>












<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 0 min
      <br/>
      <strong>Exercises:</strong> 0 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How do I setup and run the CESM?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>You have now downloaded all the model components and the CIME workflow. Let’s take a look:
From your <code class="language-plaintext highlighter-rouge">/glade/work/username/cesm2.1.1</code> directory, see what is there.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">ls</span>
</code></pre></div></div>

<blockquote class="challenge">
  <h2 id="what-was-added-after-running-manage_externals">What was added after running <code class="language-plaintext highlighter-rouge">manage_externals</code></h2>

</blockquote>

<h4 id="organization-of-the-cesm-directory">Organization of the CESM Directory</h4>

<p>CESM has a set of keywords that refer to specific directories, they are:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">SRCROOT</code> - Path to your CESM code; contains <code class="language-plaintext highlighter-rouge">CIMEROOT</code></li>
  <li><code class="language-plaintext highlighter-rouge">CIMEROOT</code> - Path of your CIME directory which is sub-directory under <code class="language-plaintext highlighter-rouge">SRCROOT</code></li>
  <li><code class="language-plaintext highlighter-rouge">CASEROOT</code> - Path to your case directories</li>
  <li><code class="language-plaintext highlighter-rouge">OBJROOT</code> - Path to your build directory</li>
  <li><code class="language-plaintext highlighter-rouge">EXEROOT</code> - Path to your run directory</li>
  <li><code class="language-plaintext highlighter-rouge">DOUT_S_ROOT</code> - Path to your archived data directory</li>
</ul>

<blockquote class="challenge">
  <h2 id="find-your-srcroot-and-cimeroot">Find your SRCROOT and CIMEROOT</h2>

  <p>Your SRCROOT and CIMEROOT exist after downloading the CESM.  What are the exact paths for you?</p>

</blockquote>

<h4 id="cimeroot">CIMEROOT</h4>

<p>The cime subdirectory contains a subdirectory called <code class="language-plaintext highlighter-rouge">scripts</code>.  This is the directory we will use initially for setting up the model.
Change into this subdirectory and take a look.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>cime/scripts
<span class="nv">$ </span><span class="nb">ls</span>
</code></pre></div></div>

<p>The final one-time step is to create a directory called <code class="language-plaintext highlighter-rouge">cases</code> in your home directory.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir</span> ~/cases
</code></pre></div></div>

<p>The cases directory (also called your <code class="language-plaintext highlighter-rouge">CASEROOT</code>) will contain all the source code and configuration files for your model experiments.<br />
Why do you think we would put something like this in our home directory?</p>

<h3 id="model-quickstart">Model Quickstart</h3>

<p>Above were the one-time setup setps, now we move on to the steps you will do everytime to setup a new model experiment and run it.</p>

<p>Go into the scripts subdirectory in your <code class="language-plaintext highlighter-rouge">CIMEROOT</code></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> /glade/work/kpegion/cesm2.1.1/cime/scripts
</code></pre></div></div>

<p>Create a new case</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./create_newcase <span class="nt">--cases</span> ~/cases/b.day1.0 <span class="nt">--res</span> f19_g17 <span class="nt">--compset</span> B1850 <span class="nt">--project</span> UGMU0032
</code></pre></div></div>

<p>This created a new subdirectory for your new case. Change to that directory.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> ~/cases/b.day1.0 
</code></pre></div></div>

<p>Setup the case</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./case_setup
</code></pre></div></div>

<p>Build the executable (this will take while)</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>qcmd <span class="nt">--</span> ./case.build
</code></pre></div></div>

<p>This will take awhile.  While the model is compiling, we will talk about what the <code class="language-plaintext highlighter-rouge">create_newcase</code> command did.</p>

<blockquote class="callout">
  <h2 id="potential-errors">Potential Errors</h2>

  <p>Some users received an error indicating that their account was overspent or expired. This happened to users who already had a NCAR account associated with a project charge code that was no longer available.  To resolve this, set the <code class="language-plaintext highlighter-rouge">PBS_ACCOUNT</code> environment variable to a valid charge code for this class.</p>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">export </span><span class="nv">PBS_ACCOUNT</span><span class="o">=</span>UGMU0032
</code></pre></div>  </div>
  <p>This setting will go away after you logout, so you will need to set it everytime for the correct project charge code associated with the project you are working on.</p>

</blockquote>

<h4 id="what-did-we-just-do">What did we just do?</h4>

<p><code class="language-plaintext highlighter-rouge">create_newcase</code> takes 3 arguments</p>

<p><img src="../fig/createnewcase.png" alt="create_newcase" /></p>

<h4 id="case-name-case">Case Name (<code class="language-plaintext highlighter-rouge">case</code>)</h4>
<p>This is the name and location of your experiment</p>
<ul>
  <li>Can be anything you want</li>
  <li>It is a good idea to make it descriptive so you can distinguish different cases</li>
  <li>NCAR has reccomended naming conventions</li>
</ul>

<p>This experiment is called <code class="language-plaintext highlighter-rouge">b.day1.0</code> and it is located in my cases directory in my home directory.</p>

<h4 id="resoultion-res">Resoultion (<code class="language-plaintext highlighter-rouge">res</code>)</h4>
<p>Specifies the resolution and grid of the model components.
Each model resolution can be specified by its alias or long name.</p>

<p><img src="../fig/grid.png" alt="grid" /></p>

<p>How to know what grids are available?
There’s a tool</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>CIMEROOT/scripts/query_config <span class="nt">--grids</span> <span class="nt">--long</span> 
</code></pre></div></div>

<p>and a <a href="http://www.cesm.ucar.edu/models/cesm2/config/grids.html">website</a></p>

<blockquote class="challenge">
  <h2 id="understanding-grids">Understanding grids</h2>

  <p>The resolution f09_g17 is the standard resolution used for CMIP simulations 
with the CESM. What is the resolution of the atmosphere/land and ocean in this model?</p>

</blockquote>

<h4 id="component-set-compset">Component Set (<code class="language-plaintext highlighter-rouge">compset</code>)</h4>

<p>Sets which versions and component models are active vs. inactive and what forcings are used.<br />
The first letter <code class="language-plaintext highlighter-rouge">B</code> in this compset indicate that all components are active.  The <code class="language-plaintext highlighter-rouge">1850</code> means that the 1850 greenhouse gas forcings will be used.</p>

<p>How do I know what the different compsets are?</p>

<p>There’s a tool</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>CIMEROOT/scripts/query_config <span class="nt">--compsets</span>
</code></pre></div></div>

<p>and a <a href="http://www.cesm.ucar.edu/models/cesm2/config/compsets.html">website</a></p>

<p>Some Common Compset Starting Characters</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">B</code> all components are active</li>
  <li><code class="language-plaintext highlighter-rouge">F</code> atmosphere is active; ocean and ice are inactive</li>
  <li><code class="language-plaintext highlighter-rouge">I</code> land is active</li>
  <li><code class="language-plaintext highlighter-rouge">G</code> ocean is active</li>
  <li><code class="language-plaintext highlighter-rouge">A</code> aquaplaned (atm with no land)</li>
</ul>

<p>Certain compsets are <code class="language-plaintext highlighter-rouge">scientifically validated</code> meaning they have been extensively tested.<br />
You can create your own compsets.
It is strongly suggested that you start developing any experiments from a scientifically validated compset, then make changes.
The selected compset determines which grids are available.</p>

<h3 id="the-caseroot-directory">The <code class="language-plaintext highlighter-rouge">CASEROOT</code> directory</h3>

<p>This was created when you ran <code class="language-plaintext highlighter-rouge">create_newcase</code>. Change directory and take a look at it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd ~/b.day1.0
$ ls
</code></pre></div></div>
<p>It contains a bunch of <code class="language-plaintext highlighter-rouge">.xml</code> files which are configuration files.  We will learn how to modify them next week.</p>

<h4 id="what-happened-when-we-ran-casesetup">What happened when we ran <code class="language-plaintext highlighter-rouge">case.setup</code>?</h4>
<ul>
  <li>Your RUNDIR and EXEROOT directories were created</li>
  <li>A bunch of user.nl.xxx files were created (these are namelist files that provide configuraiton details to different component models)</li>
  <li>Created the <code class="language-plaintext highlighter-rouge">case.run</code> and <code class="language-plaintext highlighter-rouge">case.st_archive</code> scripts</li>
  <li>Create a CaseDocs directory</li>
</ul>

<h3 id="what-happened-when-we-ran-casebuild">What happened when we ran <code class="language-plaintext highlighter-rouge">case.build</code>?</h3>
<ul>
  <li>Checked that all the input data was available</li>
  <li>Created the namelists from the user specified ones above</li>
  <li>Compiled the model</li>
</ul>

<h3 id="how-can-i-find-out-what-my-caseroot-cimeroot-etc-are-if-i-forget">How can I find out what my CASEROOT, CIMEROOT, etc. are if I forget?</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./xmlquery RUNDIR,EXEROOT,CASEROOT,CIMEROOT
</code></pre></div></div>

<h3 id="now-what">Now what?</h3>

<p>If your build has completed, then you can submit your model run to the queue.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./case.submit
</code></pre></div></div>

<p>You can see that is is in the queue, using</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>qstat <span class="nt">-u</span> username
</code></pre></div></div>

<p>What do we see regarding the model run in the queue?</p>

<p>You can logout now.  While we are away, our model will run.  We will return next week to take a look!</p>






<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
  </ul>
</blockquote>

</article>



























  
  











<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../01-Quickstart-Review/index.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span><span class="sr-only">lesson home</span></a>
      
    </h3>
  </div>
</div>


      
      






<footer>
  <div class="row">
    <div class="col-md-6 help-links" align="right">
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" align="center">
      Using <a href="https://github.com/carpentries/styles/">The Carpentries style</a>
      version <a href="https://github.com/carpentries/styles/releases/tag/v9.5.3">9.5.3</a>.
    </div>
  </div>
</footer>

      
    </div>
    
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
